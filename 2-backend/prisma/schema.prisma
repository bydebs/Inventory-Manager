generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// products table (rf001)
model Product{
  id Int @id @default(autoincrement())
  name String 
  price Float
  materials ProductMaterial[] //relationship with material
  @@map("products")
}

// raw materials (rf002)
model RawMaterial{
  id Int @id @default(autoincrement())
  name String 
  stock_quantity Float 
  products ProductMaterial[]
  @@map("raw_materials")
}

// connection table (N:M) with the required quantity (RF003)
model ProductMaterial{
  id Int @id @default(autoincrement())
  product_id Int
  raw_material_id Int
  needed_quantity Float 

  product Product @relation(fields: [product_id], references: [id])
  raw_material RawMaterial @relation(fields: [raw_material_id], references: [id])
  @@map("product_materials")
}